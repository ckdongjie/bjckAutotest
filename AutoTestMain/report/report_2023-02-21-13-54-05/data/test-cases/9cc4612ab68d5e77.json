{"uid":"9cc4612ab68d5e77","name":"testRebootGnbAndPing[1]","fullName":"TestCase.hms.test_gnb#testRebootGnbAndPing","historyId":"bfd2aaf121284d9642da629598bcef41","time":{"start":1676958116922,"stop":1676958525267,"duration":408345},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！","statusTrace":"testNum = 1\n\n    @pytest.mark.复位基站正常后ping包\n    @pytest.mark.run(order=3)\n    @pytest.mark.skipif(globalPara.get_upgrade_status()==True, reason='No Newest Version Upgrade')\n    @pytest.mark.parametrize(\"testNum\",RUN_TESTCASE['复位基站正常后ping包'] if RUN_TESTCASE.get('复位基站正常后ping包') else [])\n    def testRebootGnbAndPing(testNum, ):\n        serialNumber=BASIC_DATA['gnb']['serialNumberList']\n        pdnIp=BASIC_DATA['pdn']['pdnIp']\n        pingNrInterface = BASIC_DATA['cpe']['pingNrInterface']\n        pingwifiInterface = BASIC_DATA['cpe']['pingWifiInterface']\n        log_save_path=BASIC_DATA['ping']['logSavePath']\n        hmsObj=key_login_hms(BASIC_DATA['hms']['ip'])\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumber)\n        for i in range (1,testNum+1):\n            logging.info(key_get_time()+':run the test <'+str(i)+'> times')\n            with allure.step(key_get_time()+'执行第 '+str(i)+'次测试'):\n                rebootRes = key_reboot_enb(hmsObj, enbId)\n                assert rebootRes == 'success','基站复位操作失败，请检查！'\n                with allure.step(key_get_time()+':等待基站复位启动'):\n                    logging.info(key_get_time()+': reboot success, wait for gnb online......')\n                    key_wait(180)\n                key_confirm_device_online(hmsObj, serialNumber)\n                key_confirm_cell_status(hmsObj, enbId, 'available')\n                with allure.step('CPE接入并ping包测试'):\n>                   cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n\n..\\TestCase\\hms\\test_gnb.py:59: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncpeIp = '192.168.1.1', username = 'root', password = 'snc123...'\n\n    def key_cpe_login(cpeIp, username=\"root\", password=\"snc123...\"):\n        with allure.step(key_get_time() +\": 登录CPE前台\\n\"):\n            logging.info(key_get_time()+': login cpe command model')\n            cpe = CpeService().cpe_login(cpeIp, username, password)\n>           assert cpe != None, 'cpe登录失败，请检查！'\nE           AssertionError: cpe登录失败，请检查！\n\n..\\UserKeywords\\ue\\CpeManager.py:30: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！","statusTrace":"testNum = 1\n\n    @pytest.mark.复位基站正常后ping包\n    @pytest.mark.run(order=3)\n    @pytest.mark.skipif(globalPara.get_upgrade_status()==True, reason='No Newest Version Upgrade')\n    @pytest.mark.parametrize(\"testNum\",RUN_TESTCASE['复位基站正常后ping包'] if RUN_TESTCASE.get('复位基站正常后ping包') else [])\n    def testRebootGnbAndPing(testNum, ):\n        serialNumber=BASIC_DATA['gnb']['serialNumberList']\n        pdnIp=BASIC_DATA['pdn']['pdnIp']\n        pingNrInterface = BASIC_DATA['cpe']['pingNrInterface']\n        pingwifiInterface = BASIC_DATA['cpe']['pingWifiInterface']\n        log_save_path=BASIC_DATA['ping']['logSavePath']\n        hmsObj=key_login_hms(BASIC_DATA['hms']['ip'])\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumber)\n        for i in range (1,testNum+1):\n            logging.info(key_get_time()+':run the test <'+str(i)+'> times')\n            with allure.step(key_get_time()+'执行第 '+str(i)+'次测试'):\n                rebootRes = key_reboot_enb(hmsObj, enbId)\n                assert rebootRes == 'success','基站复位操作失败，请检查！'\n                with allure.step(key_get_time()+':等待基站复位启动'):\n                    logging.info(key_get_time()+': reboot success, wait for gnb online......')\n                    key_wait(180)\n                key_confirm_device_online(hmsObj, serialNumber)\n                key_confirm_cell_status(hmsObj, enbId, 'available')\n                with allure.step('CPE接入并ping包测试'):\n>                   cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n\n..\\TestCase\\hms\\test_gnb.py:59: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncpeIp = '192.168.1.1', username = 'root', password = 'snc123...'\n\n    def key_cpe_login(cpeIp, username=\"root\", password=\"snc123...\"):\n        with allure.step(key_get_time() +\": 登录CPE前台\\n\"):\n            logging.info(key_get_time()+': login cpe command model')\n            cpe = CpeService().cpe_login(cpeIp, username, password)\n>           assert cpe != None, 'cpe登录失败，请检查！'\nE           AssertionError: cpe登录失败，请检查！\n\n..\\UserKeywords\\ue\\CpeManager.py:30: AssertionError","steps":[{"name":"2023-02-21 13:41:56: 登录网管\n","time":{"start":1676958116922,"stop":1676958116944,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:41:56: 查询基站信息\n","time":{"start":1676958116944,"stop":1676958116961,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:41:56执行第 1次测试","time":{"start":1676958116962,"stop":1676958525266,"duration":408304},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！\n","statusTrace":"  File \"D:\\autotestPro\\TestCase\\hms\\test_gnb.py\", line 59, in testRebootGnbAndPing\n    cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n  File \"D:\\autotestPro\\UserKeywords\\ue\\CpeManager.py\", line 30, in key_cpe_login\n    assert cpe != None, 'cpe登录失败，请检查！'\n","steps":[{"name":"2023-02-21 13:41:56: 基站复位\n","time":{"start":1676958116962,"stop":1676958120331,"duration":3369},"status":"passed","steps":[{"name":"2023-02-21 13:42:00: 基站复位成功\n","time":{"start":1676958120330,"stop":1676958120331,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:42:00:等待基站复位启动","time":{"start":1676958120331,"stop":1676958300342,"duration":180011},"status":"passed","steps":[{"name":"2023-02-21 13:42:00: 等待 180s......\n","time":{"start":1676958120331,"stop":1676958300342,"duration":180011},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:00: 确认基站是在线状态\n","time":{"start":1676958300342,"stop":1676958305440,"duration":5098},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:05: 确认小区状态与预期一致,预期状态:available\n","time":{"start":1676958305440,"stop":1676958421061,"duration":115621},"status":"passed","steps":[{"name":"2023-02-21 13:45:05: 查询小区状态\n","time":{"start":1676958305440,"stop":1676958306484,"duration":1044},"status":"passed","steps":[{"name":"2023-02-21 13:45:06: 小区状态:unavailable\n","time":{"start":1676958306483,"stop":1676958306484,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:06: 等待 5s......\n","time":{"start":1676958306484,"stop":1676958311496,"duration":5012},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:11: 查询小区状态\n","time":{"start":1676958311496,"stop":1676958312396,"duration":900},"status":"passed","steps":[{"name":"2023-02-21 13:45:12: 小区状态:unavailable\n","time":{"start":1676958312395,"stop":1676958312396,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:12: 等待 5s......\n","time":{"start":1676958312396,"stop":1676958317405,"duration":5009},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:17: 查询小区状态\n","time":{"start":1676958317405,"stop":1676958318427,"duration":1022},"status":"passed","steps":[{"name":"2023-02-21 13:45:18: 小区状态:unavailable\n","time":{"start":1676958318426,"stop":1676958318427,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:18: 等待 5s......\n","time":{"start":1676958318427,"stop":1676958323442,"duration":5015},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:45:23: 查询小区状态\n","time":{"start":1676958323442,"stop":1676958371763,"duration":48321},"status":"passed","steps":[{"name":"2023-02-21 13:46:11: 小区状态:unavailable\n","time":{"start":1676958371762,"stop":1676958371763,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:11: 等待 5s......\n","time":{"start":1676958371763,"stop":1676958376768,"duration":5005},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:16: 查询小区状态\n","time":{"start":1676958376768,"stop":1676958377710,"duration":942},"status":"passed","steps":[{"name":"2023-02-21 13:46:17: 小区状态:unavailable\n","time":{"start":1676958377709,"stop":1676958377710,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:17: 等待 5s......\n","time":{"start":1676958377710,"stop":1676958382712,"duration":5002},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:22: 查询小区状态\n","time":{"start":1676958382712,"stop":1676958383619,"duration":907},"status":"passed","steps":[{"name":"2023-02-21 13:46:23: 小区状态:unavailable\n","time":{"start":1676958383618,"stop":1676958383619,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:23: 等待 5s......\n","time":{"start":1676958383619,"stop":1676958388621,"duration":5002},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:28: 查询小区状态\n","time":{"start":1676958388621,"stop":1676958389524,"duration":903},"status":"passed","steps":[{"name":"2023-02-21 13:46:29: 小区状态:unavailable\n","time":{"start":1676958389523,"stop":1676958389524,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:29: 等待 5s......\n","time":{"start":1676958389524,"stop":1676958394536,"duration":5012},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:34: 查询小区状态\n","time":{"start":1676958394536,"stop":1676958395436,"duration":900},"status":"passed","steps":[{"name":"2023-02-21 13:46:35: 小区状态:unavailable\n","time":{"start":1676958395435,"stop":1676958395436,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:35: 等待 5s......\n","time":{"start":1676958395436,"stop":1676958400444,"duration":5008},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:40: 查询小区状态\n","time":{"start":1676958400444,"stop":1676958401329,"duration":885},"status":"passed","steps":[{"name":"2023-02-21 13:46:41: 小区状态:unavailable\n","time":{"start":1676958401328,"stop":1676958401329,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:41: 等待 5s......\n","time":{"start":1676958401329,"stop":1676958406337,"duration":5008},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:46: 查询小区状态\n","time":{"start":1676958406337,"stop":1676958407232,"duration":895},"status":"passed","steps":[{"name":"2023-02-21 13:46:47: 小区状态:unavailable\n","time":{"start":1676958407231,"stop":1676958407232,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:47: 等待 5s......\n","time":{"start":1676958407233,"stop":1676958412242,"duration":5009},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:52: 查询小区状态\n","time":{"start":1676958412242,"stop":1676958414151,"duration":1909},"status":"passed","steps":[{"name":"2023-02-21 13:46:54: 小区状态:unavailable\n","time":{"start":1676958414151,"stop":1676958414151,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:54: 等待 5s......\n","time":{"start":1676958414152,"stop":1676958419161,"duration":5009},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:46:59: 查询小区状态\n","time":{"start":1676958419161,"stop":1676958421061,"duration":1900},"status":"passed","steps":[{"name":"2023-02-21 13:47:01: 小区状态:available\n","time":{"start":1676958421061,"stop":1676958421061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 13:47:01: 小区状态-available,小区预期状态-available\n","time":{"start":1676958421061,"stop":1676958421061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":36,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"CPE接入并ping包测试","time":{"start":1676958421061,"stop":1676958525265,"duration":104204},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！\n","statusTrace":"  File \"D:\\autotestPro\\TestCase\\hms\\test_gnb.py\", line 59, in testRebootGnbAndPing\n    cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n  File \"D:\\autotestPro\\UserKeywords\\ue\\CpeManager.py\", line 30, in key_cpe_login\n    assert cpe != None, 'cpe登录失败，请检查！'\n","steps":[{"name":"2023-02-21 13:47:01: 登录CPE前台\n","time":{"start":1676958421061,"stop":1676958525263,"duration":104202},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！\n","statusTrace":"  File \"D:\\autotestPro\\UserKeywords\\ue\\CpeManager.py\", line 30, in key_cpe_login\n    assert cpe != None, 'cpe登录失败，请检查！'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":44,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"6cb07145b6f52df3","name":"log","source":"6cb07145b6f52df3.txt","type":"text/plain","size":4097}],"parameters":[],"stepsCount":47,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='No Newest Version Upgrade')"},{"name":"tag","value":"run(order=3)"},{"name":"tag","value":"复位基站正常后ping包"},{"name":"parentSuite","value":"TestCase.hms"},{"name":"suite","value":"test_gnb"},{"name":"host","value":"DESKTOP-6PNVEH8"},{"name":"thread","value":"10844-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"TestCase.hms.test_gnb"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"testNum","value":"1"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["run(order=3)","复位基站正常后ping包","@pytest.mark.skipif(False, reason='No Newest Version Upgrade')"]},"source":"9cc4612ab68d5e77.json","parameterValues":["1"]}