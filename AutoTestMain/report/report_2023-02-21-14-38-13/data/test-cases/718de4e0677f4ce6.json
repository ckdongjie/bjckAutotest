{"uid":"718de4e0677f4ce6","name":"testRebootGnbAndPing[1]","fullName":"TestCase.hms.test_gnb#testRebootGnbAndPing","historyId":"bfd2aaf121284d9642da629598bcef41","time":{"start":1676960269000,"stop":1676960679162,"duration":410162},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！","statusTrace":"testNum = 1\n\n    @pytest.mark.复位基站正常后ping包\n    @pytest.mark.run(order=3)\n    @pytest.mark.skipif(globalPara.get_upgrade_status()==True, reason='No Newest Version Upgrade')\n    @pytest.mark.parametrize(\"testNum\",RUN_TESTCASE['复位基站正常后ping包'] if RUN_TESTCASE.get('复位基站正常后ping包') else [])\n    def testRebootGnbAndPing(testNum, ):\n        serialNumber=BASIC_DATA['gnb']['serialNumberList']\n        pdnIp=BASIC_DATA['pdn']['pdnIp']\n        pingNrInterface = BASIC_DATA['cpe']['pingNrInterface']\n        pingwifiInterface = BASIC_DATA['cpe']['pingWifiInterface']\n        log_save_path=BASIC_DATA['ping']['logSavePath']\n        hmsObj=key_login_hms(BASIC_DATA['hms']['ip'])\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumber)\n        for i in range (1,testNum+1):\n            logging.info(key_get_time()+':run the test <'+str(i)+'> times')\n            with allure.step(key_get_time()+'执行第 '+str(i)+'次测试'):\n                rebootRes = key_reboot_enb(hmsObj, enbId)\n                assert rebootRes == 'success','基站复位操作失败，请检查！'\n                with allure.step(key_get_time()+':等待基站复位启动'):\n                    logging.info(key_get_time()+': reboot success, wait for gnb online......')\n                    key_wait(180)\n                key_confirm_device_online(hmsObj, serialNumber)\n                key_confirm_cell_status(hmsObj, enbId, 'available')\n                with allure.step('CPE接入并ping包测试'):\n>                   cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n\n..\\TestCase\\hms\\test_gnb.py:59: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncpeIp = '192.168.1.1', username = 'root', password = 'snc123...'\n\n    def key_cpe_login(cpeIp, username=\"root\", password=\"snc123...\"):\n        with allure.step(key_get_time() +\": 登录CPE前台\\n\"):\n            logging.info(key_get_time()+': login cpe command model')\n            cpe = CpeService().cpe_login(cpeIp, username, password)\n>           assert cpe != None, 'cpe登录失败，请检查！'\nE           AssertionError: cpe登录失败，请检查！\n\n..\\UserKeywords\\ue\\CpeManager.py:30: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！","statusTrace":"testNum = 1\n\n    @pytest.mark.复位基站正常后ping包\n    @pytest.mark.run(order=3)\n    @pytest.mark.skipif(globalPara.get_upgrade_status()==True, reason='No Newest Version Upgrade')\n    @pytest.mark.parametrize(\"testNum\",RUN_TESTCASE['复位基站正常后ping包'] if RUN_TESTCASE.get('复位基站正常后ping包') else [])\n    def testRebootGnbAndPing(testNum, ):\n        serialNumber=BASIC_DATA['gnb']['serialNumberList']\n        pdnIp=BASIC_DATA['pdn']['pdnIp']\n        pingNrInterface = BASIC_DATA['cpe']['pingNrInterface']\n        pingwifiInterface = BASIC_DATA['cpe']['pingWifiInterface']\n        log_save_path=BASIC_DATA['ping']['logSavePath']\n        hmsObj=key_login_hms(BASIC_DATA['hms']['ip'])\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumber)\n        for i in range (1,testNum+1):\n            logging.info(key_get_time()+':run the test <'+str(i)+'> times')\n            with allure.step(key_get_time()+'执行第 '+str(i)+'次测试'):\n                rebootRes = key_reboot_enb(hmsObj, enbId)\n                assert rebootRes == 'success','基站复位操作失败，请检查！'\n                with allure.step(key_get_time()+':等待基站复位启动'):\n                    logging.info(key_get_time()+': reboot success, wait for gnb online......')\n                    key_wait(180)\n                key_confirm_device_online(hmsObj, serialNumber)\n                key_confirm_cell_status(hmsObj, enbId, 'available')\n                with allure.step('CPE接入并ping包测试'):\n>                   cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n\n..\\TestCase\\hms\\test_gnb.py:59: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncpeIp = '192.168.1.1', username = 'root', password = 'snc123...'\n\n    def key_cpe_login(cpeIp, username=\"root\", password=\"snc123...\"):\n        with allure.step(key_get_time() +\": 登录CPE前台\\n\"):\n            logging.info(key_get_time()+': login cpe command model')\n            cpe = CpeService().cpe_login(cpeIp, username, password)\n>           assert cpe != None, 'cpe登录失败，请检查！'\nE           AssertionError: cpe登录失败，请检查！\n\n..\\UserKeywords\\ue\\CpeManager.py:30: AssertionError","steps":[{"name":"2023-02-21 14:17:49: 登录网管\n","time":{"start":1676960269000,"stop":1676960269023,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:17:49: 查询基站信息\n","time":{"start":1676960269023,"stop":1676960269039,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:17:49执行第 1次测试","time":{"start":1676960269039,"stop":1676960679162,"duration":410123},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！\n","statusTrace":"  File \"D:\\autotestPro\\TestCase\\hms\\test_gnb.py\", line 59, in testRebootGnbAndPing\n    cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n  File \"D:\\autotestPro\\UserKeywords\\ue\\CpeManager.py\", line 30, in key_cpe_login\n    assert cpe != None, 'cpe登录失败，请检查！'\n","steps":[{"name":"2023-02-21 14:17:49: 基站复位\n","time":{"start":1676960269039,"stop":1676960272264,"duration":3225},"status":"passed","steps":[{"name":"2023-02-21 14:17:52: 基站复位成功\n","time":{"start":1676960272263,"stop":1676960272264,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:17:52:等待基站复位启动","time":{"start":1676960272264,"stop":1676960452278,"duration":180014},"status":"passed","steps":[{"name":"2023-02-21 14:17:52: 等待 180s......\n","time":{"start":1676960272264,"stop":1676960452278,"duration":180014},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:20:52: 确认基站是在线状态\n","time":{"start":1676960452278,"stop":1676960452295,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:20:52: 确认小区状态与预期一致,预期状态:available\n","time":{"start":1676960452295,"stop":1676960574968,"duration":122673},"status":"passed","steps":[{"name":"2023-02-21 14:20:52: 查询小区状态\n","time":{"start":1676960452295,"stop":1676960453404,"duration":1109},"status":"passed","steps":[{"name":"2023-02-21 14:20:53: 小区状态:unavailable\n","time":{"start":1676960453404,"stop":1676960453404,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:20:53: 等待 5s......\n","time":{"start":1676960453404,"stop":1676960458417,"duration":5013},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:20:58: 查询小区状态\n","time":{"start":1676960458417,"stop":1676960459339,"duration":922},"status":"passed","steps":[{"name":"2023-02-21 14:20:59: 小区状态:unavailable\n","time":{"start":1676960459338,"stop":1676960459339,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:20:59: 等待 5s......\n","time":{"start":1676960459339,"stop":1676960464345,"duration":5006},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:04: 查询小区状态\n","time":{"start":1676960464345,"stop":1676960465159,"duration":814},"status":"passed","steps":[{"name":"2023-02-21 14:21:05: 小区状态:unavailable\n","time":{"start":1676960465158,"stop":1676960465159,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:05: 等待 5s......\n","time":{"start":1676960465159,"stop":1676960470175,"duration":5016},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:10: 查询小区状态\n","time":{"start":1676960470175,"stop":1676960471062,"duration":887},"status":"passed","steps":[{"name":"2023-02-21 14:21:11: 小区状态:unavailable\n","time":{"start":1676960471062,"stop":1676960471062,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:11: 等待 5s......\n","time":{"start":1676960471063,"stop":1676960476065,"duration":5002},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:16: 查询小区状态\n","time":{"start":1676960476065,"stop":1676960476897,"duration":832},"status":"passed","steps":[{"name":"2023-02-21 14:21:16: 小区状态:unavailable\n","time":{"start":1676960476896,"stop":1676960476897,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:16: 等待 5s......\n","time":{"start":1676960476897,"stop":1676960481904,"duration":5007},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:21: 查询小区状态\n","time":{"start":1676960481904,"stop":1676960483918,"duration":2014},"status":"passed","steps":[{"name":"2023-02-21 14:21:23: 小区状态:unavailable\n","time":{"start":1676960483917,"stop":1676960483918,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:23: 等待 5s......\n","time":{"start":1676960483918,"stop":1676960488928,"duration":5010},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:28: 查询小区状态\n","time":{"start":1676960488928,"stop":1676960490924,"duration":1996},"status":"passed","steps":[{"name":"2023-02-21 14:21:30: 小区状态:unavailable\n","time":{"start":1676960490923,"stop":1676960490924,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:30: 等待 5s......\n","time":{"start":1676960490924,"stop":1676960495939,"duration":5015},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:21:35: 查询小区状态\n","time":{"start":1676960495939,"stop":1676960551230,"duration":55291},"status":"passed","steps":[{"name":"2023-02-21 14:22:31: 小区状态:unavailable\n","time":{"start":1676960551229,"stop":1676960551229,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:31: 等待 5s......\n","time":{"start":1676960551230,"stop":1676960556234,"duration":5004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:36: 查询小区状态\n","time":{"start":1676960556234,"stop":1676960557207,"duration":973},"status":"passed","steps":[{"name":"2023-02-21 14:22:37: 小区状态:unavailable\n","time":{"start":1676960557206,"stop":1676960557207,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:37: 等待 5s......\n","time":{"start":1676960557207,"stop":1676960562214,"duration":5007},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:42: 查询小区状态\n","time":{"start":1676960562214,"stop":1676960563023,"duration":809},"status":"passed","steps":[{"name":"2023-02-21 14:22:43: 小区状态:unavailable\n","time":{"start":1676960563023,"stop":1676960563023,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:43: 等待 5s......\n","time":{"start":1676960563024,"stop":1676960568037,"duration":5013},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:48: 查询小区状态\n","time":{"start":1676960568037,"stop":1676960569031,"duration":994},"status":"passed","steps":[{"name":"2023-02-21 14:22:49: 小区状态:unavailable\n","time":{"start":1676960569030,"stop":1676960569031,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:49: 等待 5s......\n","time":{"start":1676960569032,"stop":1676960574040,"duration":5008},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:54: 查询小区状态\n","time":{"start":1676960574040,"stop":1676960574968,"duration":928},"status":"passed","steps":[{"name":"2023-02-21 14:22:54: 小区状态:available\n","time":{"start":1676960574967,"stop":1676960574968,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"2023-02-21 14:22:54: 小区状态-available,小区预期状态-available\n","time":{"start":1676960574968,"stop":1676960574968,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":36,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"CPE接入并ping包测试","time":{"start":1676960574968,"stop":1676960679161,"duration":104193},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！\n","statusTrace":"  File \"D:\\autotestPro\\TestCase\\hms\\test_gnb.py\", line 59, in testRebootGnbAndPing\n    cpe = key_cpe_login(cpeIp, cpeUser, cpePass)\n  File \"D:\\autotestPro\\UserKeywords\\ue\\CpeManager.py\", line 30, in key_cpe_login\n    assert cpe != None, 'cpe登录失败，请检查！'\n","steps":[{"name":"2023-02-21 14:22:54: 登录CPE前台\n","time":{"start":1676960574968,"stop":1676960679159,"duration":104191},"status":"failed","statusMessage":"AssertionError: cpe登录失败，请检查！\n","statusTrace":"  File \"D:\\autotestPro\\UserKeywords\\ue\\CpeManager.py\", line 30, in key_cpe_login\n    assert cpe != None, 'cpe登录失败，请检查！'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":44,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"381df61e8866d4fa","name":"log","source":"381df61e8866d4fa.txt","type":"text/plain","size":3997}],"parameters":[],"stepsCount":47,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='No Newest Version Upgrade')"},{"name":"tag","value":"run(order=3)"},{"name":"tag","value":"复位基站正常后ping包"},{"name":"parentSuite","value":"TestCase.hms"},{"name":"suite","value":"test_gnb"},{"name":"host","value":"DESKTOP-6PNVEH8"},{"name":"thread","value":"8860-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"TestCase.hms.test_gnb"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"testNum","value":"1"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["run(order=3)","复位基站正常后ping包","@pytest.mark.skipif(False, reason='No Newest Version Upgrade')"]},"source":"718de4e0677f4ce6.json","parameterValues":["1"]}