{"uid":"6c67898d7ba34a5b","name":"testModifyPdschUlMcs[open-28]","fullName":"TestCase.phy.test_phy.TestPhy#testModifyPdschUlMcs","historyId":"88cbf7bfe736a845f6c5c3ce947ccb3d","time":{"start":1674204819554,"stop":1674204861917,"duration":42363},"status":"broken","statusMessage":"FileNotFoundError: [WinError 3] 系统找不到指定的路径。: ''","statusTrace":"self = <TestCase.phy.test_phy.TestPhy object at 0x00000198757E9C40>\nswitch = 'open', mcs = 28\n\n    @allure.story(\"支持PDSCH_上行调制解调方式配置\")\n    @pytest.mark.支持PDSCH_上行调制解调方式配置\n    @pytest.mark.parametrize(\"switch, mcs\",RUN_TESTCASE['支持PDSCH_上行调制解调方式配置'] if RUN_TESTCASE.get('支持PDSCH_上行调制解调方式配置') else [])\n    def testModifyPdschUlMcs(self, switch, mcs):\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        serialNumberList=BASIC_DATA['gnb']['serialNumberList']\n        hmsObj = key_login_hms(BASIC_DATA['hms']['ip'])\n        logSavePath = BASIC_DATA['cpe']['ueLogSavePath']\n        ueLogBackup = BASIC_DATA['cpe']['ueLogBackup']\n        pdnSshIp = BASIC_DATA['pdn']['pdnSshIp']\n        pdnSshUser = BASIC_DATA['pdn']['pdnUsername']\n        pdnSshPass = BASIC_DATA['pdn']['pdnPassword']\n        nrPort = BASIC_DATA['flow']['nrPort']\n        spanTime = BASIC_DATA['flow']['spanTime']\n        cpePcIp = BASIC_DATA['flow']['cpePcIp']\n        iperfPath = BASIC_DATA['flow']['iperfLocalPath']\n        pdnIp = BASIC_DATA['pdn']['pdnIp']\n        enbDebugIp = BASIC_DATA['gnb']['debugIp']\n        pcIp = BASIC_DATA['flow']['localPcIp']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumberList)\n        cpe = key_cpe_login(cpeIp,cpeUser,cpePass)\n        pdn = key_pdn_login(pdnSshIp,pdnSshUser,pdnSshPass)\n        ueLogFilePath = ''\n        try:\n            with allure.step(key_get_time() +\": 确认支持PDSCH的上行调制解调方式,mcs值:\"+str(mcs)+'\\n'):\n                logging.warning(key_get_time()+': confirm support PDSCH UL mcs config, mcs value:'+str(mcs))\n            #修改pdsch调度参数\n>           key_modify_pdsch_ul_mcs(hmsObj, enbId, switch, mcs)\n\n..\\TestCase\\phy\\test_phy.py:558: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhmsObj = <BasicModel.hms.hms.HMS object at 0x0000019875952D90>, enbId = 4\nswitch = 'open', mcs = 28\n\n    def key_modify_pdsch_ul_mcs(hmsObj, enbId, switch, mcs=28):\n    \n        with allure.step(key_get_time() +\": 修改PDSCH上行调制解调参数,mcs值:\"+str(mcs)+'\\n'):\n            logging.info(key_get_time()+': modify PDSCH UL mcs, mcs value:'+str(mcs))\n            modifySwitchRes = ULScheduleService().modify_du_ul_amc_switch(hmsObj, enbId, switch)\n            if modifySwitchRes == True:\n                modifyMcsRes = ULScheduleService().modify_du_ul_mcs(hmsObj, enbId, mcs)\n                if modifyMcsRes == True:\n                    with allure.step(key_get_time() +\":PDSCH上行调制解调参数修改成功。\"):\n                        logging.info(key_get_time()+': PDSCH UL mcs modify success!')\n                else:\n                    with allure.step(key_get_time() +\":PDSCH上行调制解调参数修改失败。\"):\n                        logging.warning(key_get_time()+': PDSCH UL mcs modify failure!')\n>           assert modifyMcsRes == True,'修改PDSCH上行调制解调参数修改异常，请检查！'\nE           UnboundLocalError: local variable 'modifyMcsRes' referenced before assignment\n\n..\\UserKeywords\\hms\\PdcchManager.py:107: UnboundLocalError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <TestCase.phy.test_phy.TestPhy object at 0x00000198757E9C40>\nswitch = 'open', mcs = 28\n\n    @allure.story(\"支持PDSCH_上行调制解调方式配置\")\n    @pytest.mark.支持PDSCH_上行调制解调方式配置\n    @pytest.mark.parametrize(\"switch, mcs\",RUN_TESTCASE['支持PDSCH_上行调制解调方式配置'] if RUN_TESTCASE.get('支持PDSCH_上行调制解调方式配置') else [])\n    def testModifyPdschUlMcs(self, switch, mcs):\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        serialNumberList=BASIC_DATA['gnb']['serialNumberList']\n        hmsObj = key_login_hms(BASIC_DATA['hms']['ip'])\n        logSavePath = BASIC_DATA['cpe']['ueLogSavePath']\n        ueLogBackup = BASIC_DATA['cpe']['ueLogBackup']\n        pdnSshIp = BASIC_DATA['pdn']['pdnSshIp']\n        pdnSshUser = BASIC_DATA['pdn']['pdnUsername']\n        pdnSshPass = BASIC_DATA['pdn']['pdnPassword']\n        nrPort = BASIC_DATA['flow']['nrPort']\n        spanTime = BASIC_DATA['flow']['spanTime']\n        cpePcIp = BASIC_DATA['flow']['cpePcIp']\n        iperfPath = BASIC_DATA['flow']['iperfLocalPath']\n        pdnIp = BASIC_DATA['pdn']['pdnIp']\n        enbDebugIp = BASIC_DATA['gnb']['debugIp']\n        pcIp = BASIC_DATA['flow']['localPcIp']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumberList)\n        cpe = key_cpe_login(cpeIp,cpeUser,cpePass)\n        pdn = key_pdn_login(pdnSshIp,pdnSshUser,pdnSshPass)\n        ueLogFilePath = ''\n        try:\n            with allure.step(key_get_time() +\": 确认支持PDSCH的上行调制解调方式,mcs值:\"+str(mcs)+'\\n'):\n                logging.warning(key_get_time()+': confirm support PDSCH UL mcs config, mcs value:'+str(mcs))\n            #修改pdsch调度参数\n            key_modify_pdsch_ul_mcs(hmsObj, enbId, switch, mcs)\n            #确认小区状态正常\n            key_confirm_cell_status(hmsObj, enbId, 'available')\n            dev_manager, qxdm_window, diagService = key_start_ue_log_trace()\n            #cpe接入小区，确认pdu建立成功\n            key_cpe_attach(cpe)\n            setupRes = key_confirm_pdu_setup_succ(cpe)\n            if setupRes == 'success':\n                key_wait(10)\n                key_ul_udp_nr_flow_test(cpe, pdn, cpePcIp, iperfPath, pdnIp, enbDebugIp, pcIp, monitorPort=nrPort, spanTime=spanTime)\n                ueLogFilePath = key_stop_ue_log_trace(dev_manager, qxdm_window, diagService, logSavePath)\n                mcsRes = key_pdsch_mcs_analyze(ueLogFilePath, mcs)\n            else:\n                logging.info(key_get_time()+': ue attach failure, please check!')\n            assert mcsRes == True, '参数校验失败，请检查！'\n        finally:\n            #cpe去接入小区\n            key_cpe_detach(cpe)\n            logging.info(key_get_time()+': move the log file to backup folder')\n            fileName = ueLogFilePath.split('\\\\')[-1]\n            if os.path.exists(ueLogBackup+'\\\\'+fileName):\n>               os.remove(ueLogFilePath)\nE               FileNotFoundError: [WinError 3] 系统找不到指定的路径。: ''\n\n..\\TestCase\\phy\\test_phy.py:579: FileNotFoundError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"FileNotFoundError: [WinError 3] 系统找不到指定的路径。: ''","statusTrace":"self = <TestCase.phy.test_phy.TestPhy object at 0x00000198757E9C40>\nswitch = 'open', mcs = 28\n\n    @allure.story(\"支持PDSCH_上行调制解调方式配置\")\n    @pytest.mark.支持PDSCH_上行调制解调方式配置\n    @pytest.mark.parametrize(\"switch, mcs\",RUN_TESTCASE['支持PDSCH_上行调制解调方式配置'] if RUN_TESTCASE.get('支持PDSCH_上行调制解调方式配置') else [])\n    def testModifyPdschUlMcs(self, switch, mcs):\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        serialNumberList=BASIC_DATA['gnb']['serialNumberList']\n        hmsObj = key_login_hms(BASIC_DATA['hms']['ip'])\n        logSavePath = BASIC_DATA['cpe']['ueLogSavePath']\n        ueLogBackup = BASIC_DATA['cpe']['ueLogBackup']\n        pdnSshIp = BASIC_DATA['pdn']['pdnSshIp']\n        pdnSshUser = BASIC_DATA['pdn']['pdnUsername']\n        pdnSshPass = BASIC_DATA['pdn']['pdnPassword']\n        nrPort = BASIC_DATA['flow']['nrPort']\n        spanTime = BASIC_DATA['flow']['spanTime']\n        cpePcIp = BASIC_DATA['flow']['cpePcIp']\n        iperfPath = BASIC_DATA['flow']['iperfLocalPath']\n        pdnIp = BASIC_DATA['pdn']['pdnIp']\n        enbDebugIp = BASIC_DATA['gnb']['debugIp']\n        pcIp = BASIC_DATA['flow']['localPcIp']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumberList)\n        cpe = key_cpe_login(cpeIp,cpeUser,cpePass)\n        pdn = key_pdn_login(pdnSshIp,pdnSshUser,pdnSshPass)\n        ueLogFilePath = ''\n        try:\n            with allure.step(key_get_time() +\": 确认支持PDSCH的上行调制解调方式,mcs值:\"+str(mcs)+'\\n'):\n                logging.warning(key_get_time()+': confirm support PDSCH UL mcs config, mcs value:'+str(mcs))\n            #修改pdsch调度参数\n>           key_modify_pdsch_ul_mcs(hmsObj, enbId, switch, mcs)\n\n..\\TestCase\\phy\\test_phy.py:558: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhmsObj = <BasicModel.hms.hms.HMS object at 0x0000019875952D90>, enbId = 4\nswitch = 'open', mcs = 28\n\n    def key_modify_pdsch_ul_mcs(hmsObj, enbId, switch, mcs=28):\n    \n        with allure.step(key_get_time() +\": 修改PDSCH上行调制解调参数,mcs值:\"+str(mcs)+'\\n'):\n            logging.info(key_get_time()+': modify PDSCH UL mcs, mcs value:'+str(mcs))\n            modifySwitchRes = ULScheduleService().modify_du_ul_amc_switch(hmsObj, enbId, switch)\n            if modifySwitchRes == True:\n                modifyMcsRes = ULScheduleService().modify_du_ul_mcs(hmsObj, enbId, mcs)\n                if modifyMcsRes == True:\n                    with allure.step(key_get_time() +\":PDSCH上行调制解调参数修改成功。\"):\n                        logging.info(key_get_time()+': PDSCH UL mcs modify success!')\n                else:\n                    with allure.step(key_get_time() +\":PDSCH上行调制解调参数修改失败。\"):\n                        logging.warning(key_get_time()+': PDSCH UL mcs modify failure!')\n>           assert modifyMcsRes == True,'修改PDSCH上行调制解调参数修改异常，请检查！'\nE           UnboundLocalError: local variable 'modifyMcsRes' referenced before assignment\n\n..\\UserKeywords\\hms\\PdcchManager.py:107: UnboundLocalError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <TestCase.phy.test_phy.TestPhy object at 0x00000198757E9C40>\nswitch = 'open', mcs = 28\n\n    @allure.story(\"支持PDSCH_上行调制解调方式配置\")\n    @pytest.mark.支持PDSCH_上行调制解调方式配置\n    @pytest.mark.parametrize(\"switch, mcs\",RUN_TESTCASE['支持PDSCH_上行调制解调方式配置'] if RUN_TESTCASE.get('支持PDSCH_上行调制解调方式配置') else [])\n    def testModifyPdschUlMcs(self, switch, mcs):\n        cpeIp = BASIC_DATA['cpe']['cpeSshIp']\n        cpeUser = BASIC_DATA['cpe']['cpeUsername']\n        cpePass = BASIC_DATA['cpe']['cpePassword']\n        serialNumberList=BASIC_DATA['gnb']['serialNumberList']\n        hmsObj = key_login_hms(BASIC_DATA['hms']['ip'])\n        logSavePath = BASIC_DATA['cpe']['ueLogSavePath']\n        ueLogBackup = BASIC_DATA['cpe']['ueLogBackup']\n        pdnSshIp = BASIC_DATA['pdn']['pdnSshIp']\n        pdnSshUser = BASIC_DATA['pdn']['pdnUsername']\n        pdnSshPass = BASIC_DATA['pdn']['pdnPassword']\n        nrPort = BASIC_DATA['flow']['nrPort']\n        spanTime = BASIC_DATA['flow']['spanTime']\n        cpePcIp = BASIC_DATA['flow']['cpePcIp']\n        iperfPath = BASIC_DATA['flow']['iperfLocalPath']\n        pdnIp = BASIC_DATA['pdn']['pdnIp']\n        enbDebugIp = BASIC_DATA['gnb']['debugIp']\n        pcIp = BASIC_DATA['flow']['localPcIp']\n        enbId, enbName = key_get_enb_info(hmsObj, serialNumberList)\n        cpe = key_cpe_login(cpeIp,cpeUser,cpePass)\n        pdn = key_pdn_login(pdnSshIp,pdnSshUser,pdnSshPass)\n        ueLogFilePath = ''\n        try:\n            with allure.step(key_get_time() +\": 确认支持PDSCH的上行调制解调方式,mcs值:\"+str(mcs)+'\\n'):\n                logging.warning(key_get_time()+': confirm support PDSCH UL mcs config, mcs value:'+str(mcs))\n            #修改pdsch调度参数\n            key_modify_pdsch_ul_mcs(hmsObj, enbId, switch, mcs)\n            #确认小区状态正常\n            key_confirm_cell_status(hmsObj, enbId, 'available')\n            dev_manager, qxdm_window, diagService = key_start_ue_log_trace()\n            #cpe接入小区，确认pdu建立成功\n            key_cpe_attach(cpe)\n            setupRes = key_confirm_pdu_setup_succ(cpe)\n            if setupRes == 'success':\n                key_wait(10)\n                key_ul_udp_nr_flow_test(cpe, pdn, cpePcIp, iperfPath, pdnIp, enbDebugIp, pcIp, monitorPort=nrPort, spanTime=spanTime)\n                ueLogFilePath = key_stop_ue_log_trace(dev_manager, qxdm_window, diagService, logSavePath)\n                mcsRes = key_pdsch_mcs_analyze(ueLogFilePath, mcs)\n            else:\n                logging.info(key_get_time()+': ue attach failure, please check!')\n            assert mcsRes == True, '参数校验失败，请检查！'\n        finally:\n            #cpe去接入小区\n            key_cpe_detach(cpe)\n            logging.info(key_get_time()+': move the log file to backup folder')\n            fileName = ueLogFilePath.split('\\\\')[-1]\n            if os.path.exists(ueLogBackup+'\\\\'+fileName):\n>               os.remove(ueLogFilePath)\nE               FileNotFoundError: [WinError 3] 系统找不到指定的路径。: ''\n\n..\\TestCase\\phy\\test_phy.py:579: FileNotFoundError","steps":[{"name":"2023-01-20 16:53:39: 登录网管\n","time":{"start":1674204819555,"stop":1674204819585,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"2023-01-20 16:53:39: 查询基站信息\n","time":{"start":1674204819585,"stop":1674204819617,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"2023-01-20 16:53:39: 登录CPE前台\n","time":{"start":1674204819617,"stop":1674204819778,"duration":161},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"2023-01-20 16:53:39: 登录pdn服务器: 172.16.2.202","time":{"start":1674204819778,"stop":1674204826127,"duration":6349},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"2023-01-20 16:53:46: 确认支持PDSCH的上行调制解调方式,mcs值:28\n","time":{"start":1674204826128,"stop":1674204826128,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"2023-01-20 16:53:46: 修改PDSCH上行调制解调参数,mcs值:28\n","time":{"start":1674204826128,"stop":1674204857815,"duration":31687},"status":"broken","statusMessage":"UnboundLocalError: local variable 'modifyMcsRes' referenced before assignment\n","statusTrace":"  File \"D:\\autotestPro\\UserKeywords\\hms\\PdcchManager.py\", line 107, in key_modify_pdsch_ul_mcs\n    assert modifyMcsRes == True,'修改PDSCH上行调制解调参数修改异常，请检查！'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"stepsCount":0},{"name":"2023-01-20 16:54:17: cpe执行detach命令\n","time":{"start":1674204857816,"stop":1674204861917,"duration":4101},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[{"uid":"c2ca76289c167131","name":"log","source":"c2ca76289c167131.txt","type":"text/plain","size":1404}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"stepsCount":7},"afterStages":[],"labels":[{"name":"feature","value":"物理层参数测试"},{"name":"story","value":"支持PDSCH_上行调制解调方式配置"},{"name":"tag","value":"支持PDSCH_上行调制解调方式配置"},{"name":"parentSuite","value":"TestCase.phy"},{"name":"suite","value":"test_phy"},{"name":"subSuite","value":"TestPhy"},{"name":"host","value":"DESKTOP-GH8U6NQ"},{"name":"thread","value":"52804-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"TestCase.phy.test_phy"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"mcs","value":"28"},{"name":"switch","value":"'open'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["支持PDSCH_上行调制解调方式配置"]},"source":"6c67898d7ba34a5b.json","parameterValues":["28","'open'"]}